### reset password

devise :recoverable

	User clicks "Forgot Password"
	            |
	            v
	POST /users/password
	            |
	            v
	Devise generates RAW token
	            |
	            v
	Hash token â†’ save to DB
	(reset_password_token,
	 reset_password_sent_at)
	            |
	            v
	Send email with RAW token link
	(/password/edit?reset_password_token=RAW)
	            |
	            v
	User clicks email link
	            |
	            v
	GET /users/password/edit
	            |
	            v
	Devise hashes RAW token
	            |
	            v
	Compare with DB token
	            |
	            v
	Is token valid & not expired?
	        /               \
	      YES               NO
	      |                 |
	      v                 v
	Show reset form     Show error
	      |
	      v
	User submits new password
	(POST /users/password)
	      |
	      v
	Update encrypted_password
	Clear reset_password_token
	Clear reset_password_sent_at
	      |
	      v
	(Optional) Auto login user
	Invalidate old sessions


	Columns Updated During Password Reset
	Column	When Updated
	encrypted_password	Always (new password)
	reset_password_token	Cleared after reset
	reset_password_sent_at	Cleared after reset


#####  remember me

	devise :rememberable

	It adds (or expects):

	remember_created_at :datetime


#### for autologout

	Automatically logs out users after a period of inactivity
	Configurable in config/initializers/devise.rb:
	config.timeout_in = 30.minutes

	ession["warden.user.user.key"] = [[user.id], auth_salt]
	session[:last_request_at] = Time.current.to_i


	On every request, Devise checks:

	if session[:last_request_at] < Time.current - timeout_in
	  sign_out(current_user)
	else
	  session[:last_request_at] = Time.current.to_i
	end