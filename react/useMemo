ğŸ§© useMemo â€” FROM SCRATCH
1ï¸âƒ£ Why does useMemo exist?
Problem first

Every time a component re-renders:

all functions run again

all calculations run again

Even if inputs didnâ€™t change.

Example problem
function Example({ number }) {
  const result = slowCalculation(number);

  return <p>{result}</p>;
}


If slowCalculation is expensive:

UI feels slow

Unnecessary work happens âŒ

2ï¸âƒ£ What is useMemo?

useMemo memoizes (caches) a computed value and recalculates it only when dependencies change.

3ï¸âƒ£ Basic syntax
const memoizedValue = useMemo(() => {
  return expensiveCalculation(a, b);
}, [a, b]);

4ï¸âƒ£ Important rule (KEY IDEA)

useMemo caches a VALUE, not a function

(Functions are for useCallback)

5ï¸âƒ£ Simple example (easy)
function Square({ number }) {
  const squared = useMemo(() => {
    console.log("Calculating...");
    return number * number;
  }, [number]);

  return <p>{squared}</p>;
}

What happens?

number changes â†’ recalculates

Re-render without change â†’ uses cached value

6ï¸âƒ£ Without useMemo vs with useMemo
âŒ Without
const squared = number * number;


Runs on every render.

âœ… With
useMemo(() => number * number, [number]);


Runs only when needed.

7ï¸âƒ£ Real example: expensive loop
function Expensive({ num }) {
  const result = useMemo(() => {
    let total = 0;
    for (let i = 0; i < 1_000_000_000; i++) {
      total += num;
    }
    return total;
  }, [num]);

  return <p>{result}</p>;
}

8ï¸âƒ£ When NOT to use useMemo âŒ

Very important ğŸ‘‡

Small calculations

Simple JSX

Every render anyway

Premature optimization

useMemo is a performance tool, not a correctness tool

9ï¸âƒ£ Common mistake âŒ
useMemo(() => {
  setCount(count + 1);
}, [count]);


âŒ Never do side effects in useMemo
Side effects â†’ useEffect

ğŸ”Ÿ useMemo vs useEffect (CONFUSION CLEAR)
useMemo	useEffect
Returns value	Runs side effect
Sync	Async-ish
For performance	For behavior
1ï¸âƒ£1ï¸âƒ£ Interview questions ğŸ†

Q: Does useMemo guarantee performance improvement?
A: No, React may discard memoization.

Q: Is useMemo executed during render?
A: Yes, but cached value is reused.

ğŸ§  Mental model

Think of useMemo as:

â€œDonâ€™t recalculate unless inputs changeâ€

Rails analogy ğŸ§ 
React	Rails
useMemo	memoization (`
expensive calc	N+1 query
ğŸ”‘ Summary

useMemo caches values

Runs during render

Avoid unnecessary recomputation

Use sparingly