ğŸ‘‰ â€œOpen CSV streamâ€ means reading or writing a CSV file gradually (row by row) instead of loading the entire file into memory at once.

What â€œstreamâ€ really means ğŸ§ 

A stream is:

A continuous flow of data

Processed piece by piece

Without holding the full content in RAM

Think:

ğŸš° Water pipe, not a bucket

CSV without streaming (bad for large files)
rows = []
100_000.times do |i|
  rows << [i, "user#{i}"]
end

CSV.generate do |csv|
  rows.each { |row| csv << row }
end


âŒ Problems:

High memory usage

Risk of OOM

Slow for large reports

CSV with streaming (open CSV stream)
CSV.open(file_path, "wb") do |csv|
  users.find_each do |user|
    csv << [user.id, user.email]
  end
end

Whatâ€™s happening:

File opened once

Each csv << writes immediately

No full CSV in memory

âœ… This is â€œopening a CSV streamâ€

Streaming while sending response (even more real)
self.response_body = Enumerator.new do |y|
  CSV.generate(y) do |csv|
    User.find_each do |user|
      csv << [user.id, user.email]
    end
  end
end


Here:

CSV streamed directly to client

No temp file

No full memory load

Why people specifically say â€œCSV streamâ€

Because:

CSV is line-based

Perfect for row-by-row writing

Unlike XLS/XLSX (which needs full structure)

CSV vs XLS streaming (important difference)

| Feature            | CSV | XLSX       |
| ------------------ | --- | ---------- |
| Row-by-row write   | âœ…   | âŒ (mostly) |
| Streaming friendly | âœ…   | âš ï¸ limited |
| Memory efficient   | âœ…   | âŒ          |
| Easy S3 upload     | âœ…   | âš ï¸         |

Thatâ€™s why people say:

â€œCSV can be streamed, XLS cannot (easily).â€

In your report flow context ğŸ§©

You earlier said:

â€œCSV row is written one by one but in XLSâ€¦â€

Now it should click:

CSV flow
Open CSV stream
â†’ write row
â†’ write row
â†’ write row
â†’ close file
â†’ upload to S3

XLS flow
Build workbook in memory
â†’ save file
â†’ upload to S3

Interview-ready explanation ğŸ¯

Opening a CSV stream means writing or reading the CSV incrementally, usually row by row, so the entire file is never loaded into memory. This makes CSV ideal for large data exports.

One-liner that sounds senior ğŸ˜„

CSV is stream-friendly because itâ€™s sequential and line-based.