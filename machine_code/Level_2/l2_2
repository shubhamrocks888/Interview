ğŸ• Mock Interview â€“ Round 2 (Core API â€“ 25 min)
Implement:
1ï¸âƒ£ Create User

POST /users

Payload:

{
  "user": {
    "email": "test@example.com",
    "name": "Shubham"
  }
}


Requirements:

Proper strong params

Proper status codes

Handle validation errors

2ï¸âƒ£ Create Task For a User

POST /users/:user_id/tasks

Payload:

{
  "task": {
    "title": "Finish assignment",
    "description": "Rails coding",
    "status": "pending",
    "due_date": "2026-03-01"
  }
}


Requirements:

Return 404 if user not found

Task must belong to that user

Proper error handling

Write:

UsersController#create

TasksController#create

No extra explanation. Just code.




########

class UsersController < ApplicationController
    
    def create
        user = User.new(user_params)
        if user.save
            render json: user, status: :created
        else
            render json: { errors: user.errors.full_messages}, status: :unprocessable_entity
        end
    end
    
    private
    
    def user_params
        params.require(:user).permit(:email,:name)
    end
end

class TasksController < ApplicationController
  def create
    user = User.find_by(id: params[:user_id])
    return render json: { error: "User not found" }, status: :not_found unless user

    task = user.tasks.new(task_params)

    if task.save
      render json: task, status: :created
    else
      render json: { errors: task.errors.full_messages }, status: :unprocessable_entity
    end
  end

  private

  def task_params
    params.require(:task).permit(:title, :description, :status, :due_date)
  end
end
