ðŸš€ Now Iâ€™ll Push You Harder (Real Interview Upgrade)

Next round twist:

Add pagination to GET /posts (10 per page)

Implement basic pagination without using Kaminari or WillPaginate.

Write only the index method again.


####

def index
	page = params[:page].to_i
	page = 1 if page <=0

	per_page = 10
	offset_per_page = (page-1) * 10
	
	posts = Post.includes(:user).limit(per_page).offset(offset_per_page)

	render json: posts
end

###

ðŸ”¥ Interview Bonus (Add Meta Data)

A stronger version returns pagination metadata:

def index
  page = params[:page].to_i
  page = 1 if page <= 0

  per_page = 10
  offset = (page - 1) * per_page

  posts = Post.includes(:user)
              .limit(per_page)
              .offset(offset)

  total_count = Post.count

  render json: {
    data: posts.as_json(
      only: [:id, :title, :status],
      include: { user: { only: [:id, :full_name, :email] } }
    ),
    meta: {
      current_page: page,
      per_page: per_page,
      total_count: total_count,
      total_pages: (total_count.to_f / per_page).ceil
    }
  }
end
