What is group_by in Ruby?

group_by is an Enumerable method used to group elements of a collection based on a condition (a block).

It returns a Hash where:

key = result of the block

value = array of elements that produced that key

ðŸ“Œ Basic Syntax
collection.group_by { |element| condition }

âœ… Simple Example
numbers = [1, 2, 3, 4, 5, 6]

result = numbers.group_by { |n| n.even? }

Output:
{
  false => [1, 3, 5],
  true  => [2, 4, 6]
}


ðŸ‘‰ Numbers are grouped by even? result.

âœ… Realistic Example (Your Case)
employees.values.group_by { |e| e[:role] }

What happens internally?
"developer" => [john, jane, tom]
"manager"   => [jack, jill]
"qa"        => [bob, alice]


Each employee goes into a bucket decided by e[:role].

ðŸ”„ How group_by Works (Internals)

Think of it like this:

result = {}

collection.each do |item|
  key = yield(item)   # block result
  result[key] ||= []
  result[key] << item
end


ðŸ§  Important insight:
Ruby creates arrays automatically for each group.

âŒ Without group_by (Manual Way)
grouped = {}

employees.values.each do |e|
  grouped[e[:role]] ||= []
  grouped[e[:role]] << e
end


âœ”ï¸ Works
âŒ More code
âŒ Less readable

ðŸŸ¢ Common Use Cases
Use Case	Example
Group DB records	users.group_by(&:role)
Categorize data	Orders by status
Analytics	Sales per region
Reporting	Employees per department
ðŸ§  Interview One-Liner

"group_by groups a collection into a hash based on the value returned by the block, making aggregation and reporting logic concise and readable."

âš ï¸ Key Points to Remember

Returns a Hash

Values are always arrays

Does not mutate original collection

Part of Enumerable