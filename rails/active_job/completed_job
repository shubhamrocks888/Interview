First: Redis does NOT â€œknowâ€ job status

ğŸ‘‰ Sidekiq knows. Redis is dumb storage.

Redis never decides:

job completed

job failed

job crashed

Sidekiq decides â€” Redis just follows commands.

Core idea (one line)

A job is considered completed when Sidekiq explicitly deletes it from Redis.

No delete = not completed
Delete = completed

Thatâ€™s it.

Step-by-step: job lifecycle in Redis
STEP 1 â€” Job is enqueued

Stored in Redis:

queue:default   (LIST)

STEP 2 â€” Job is picked up

Sidekiq:

Pops job from queue:default

Records it in:

workers (HASH)

process metadata

Redis now has:

workers â†’ job is running

STEP 3 â€” Job executes in memory

Important:

Redis is not involved

Job runs fully inside Sidekiq thread

Redis still shows:

workers â†’ job is running

STEP 4 â€” Job finishes successfully âœ…

Now comes the key moment.

Sidekiq does three explicit Redis operations:

1ï¸âƒ£ Remove worker entry

HDEL workers <process_id>:<thread_id>


2ï¸âƒ£ Update stats (processed count, timing, etc.)

3ï¸âƒ£ Do NOTHING else with the job payload

ğŸ‘‰ No retry
ğŸ‘‰ No history
ğŸ‘‰ No â€œcompleted jobsâ€ table

The job payload is simply gone.

So how is â€œcompletionâ€ represented?

By absence, not presence.

State	Redis representation
Waiting	In queue:*
Running	In workers
Failed	In retry / dead
Completed	Nowhere âœ…
This is intentional (design choice)

Imagine if Sidekiq stored completed jobs:

Redis would grow infinitely

Massive memory usage

Slow operations

Instead:

Completed jobs are garbage-collected immediately

If you want history â†’ you must log it yourself.

What if Sidekiq crashes before deletion?

This is the critical part ğŸ‘‡

Case: Job finished, but Sidekiq crashed before cleanup

Job logic ran

DB changes committed

BUT Redis cleanup never happened

Redis still shows:

workers â†’ job running


On restart:

Sidekiq sees stale worker

Re-queues the job

Job runs again

ğŸ‘‰ Thatâ€™s why Sidekiq guarantees at-least-once, not exactly-once.

Important interview sentence ğŸ”¥

Sidekiq does not track completed jobs. A job is considered complete when Sidekiq removes all references to it from Redis. Completion is represented by deletion, not by a stored success state.

Bonus: How Sidekiq does track success stats

Sidekiq keeps only counters, not job data:

stat:processed

stat:failed

These are numbers, not job records.

If interviewer pushes: â€œThen how do we audit jobs?â€

Correct answers:

Application logs

Database records

Custom middleware

Sidekiq Pro Batches / callbacks

Mental model to remember forever
Job exists in Redis â†’ not done
Job does not exist â†’ done


Redis never says â€œcompletedâ€.
Sidekiq proves completion by deleting the job.