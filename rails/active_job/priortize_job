1ï¸âƒ£ Are critical, mailers, default, low built-in Sidekiq queues?

ğŸ‘‰ NO

Sidekiq does not ship with predefined queues like this.

These are just names you chose.

Sidekiq treats queue names as plain strings.

sidekiq -q anything -q foo -q bar


All are equally valid.

2ï¸âƒ£ Then why do we always see default, mailers, critical?

Because of Rails conventions, not Sidekiq defaults.

Rails default

If you donâ€™t specify:

queue_as :something


Rails uses:

queue_as :default


Thatâ€™s why default feels â€œspecialâ€ â€” but itâ€™s Rails, not Sidekiq.

3ï¸âƒ£ What queues DOES Sidekiq create by default?
âœ… Only ONE internal queue exists:
default


And even this is created only when a job is pushed there.

Sidekiq itself:

âŒ does not pre-create queues

âŒ does not enforce queue names

âŒ does not define priorities

Queues appear in Redis on demand.

4ï¸âƒ£ How does Sidekiq interpret this command?
bundle exec sidekiq -q critical -q mailers -q default -q low

Means:

â€œThis Sidekiq process will poll these queues in this order.â€

Priority is left â†’ right.

Polling order:

critical

mailers

default

low

âš ï¸ If critical always has jobs, others may starve.

5ï¸âƒ£ Priority weights (important detail)

You can assign weights:

sidekiq -q critical,5 -q default,2 -q low,1


Meaning:

For every 5 critical jobs

Process 2 default

Process 1 low

This is not default behavior, itâ€™s your configuration.

6ï¸âƒ£ Where do these queue names usually come from?
a) Active Job
queue_as :mailers

b) Rails generators

Mailer jobs often use:

queue_as :mailers

c) Team conventions

Most teams agree on:

critical
default
mailers
low


But they are 100% optional.

7ï¸âƒ£ What happens if a job goes to a queue Sidekiq is NOT listening to?

Example:

queue_as :reports


But Sidekiq started as:

sidekiq -q default

Result:

âŒ Job stays in Redis forever
âŒ Never executed
âŒ No error shown

This is a silent failure â†’ very dangerous.

8ï¸âƒ£ Sidekiq Web UI proof

In /sidekiq dashboard:

Youâ€™ll see queues only after jobs are pushed

Queue names match exactly what you used

No magic names appear.

9ï¸âƒ£ Interview-level clarification (very important)

â“ â€œAre Sidekiq queues predefined?â€
âœ… Answer: No, Sidekiq queues are user-defined; only default is commonly used by convention via Rails.

â“ â€œDoes Sidekiq have modes?â€
âœ… Answer: No, Sidekiq has queues, not modes.

ğŸ”Ÿ One-line truth to remember

Sidekiq does not define queues â€” your application does.



###########


âœ… CORRECT meaning (simple)
sidekiq -q critical,5 -q default,2 -q low,1


Means:

When Sidekiq chooses the next job to run, it will pick jobs from queues in this ratio.

It affects job selection frequency, not parallel execution.

1ï¸âƒ£ Letâ€™s build the right mental model

Sidekiq works like this:

Worker thread finishes a job

Sidekiq asks:
ğŸ‘‰ â€œWhich queue should I pull the next job from?â€

Weights influence that decision

2ï¸âƒ£ What does critical,5 really mean?

Internally, Sidekiq expands queues like this:

[critical, critical, critical, critical, critical,
 default, default,
 low]


Then it:

Randomly picks from this list

Pulls a job from the chosen queue

3ï¸âƒ£ Example with numbers (very important)

Assume:

Each job takes ~1 second

You have 1 Sidekiq process

10 worker threads

All queues are full

Over time, Sidekiq will roughly execute:
Queue	% of jobs processed
critical	~62% (5/8)
default	~25% (2/8)
low	~13% (1/8)

âš ï¸ This is probabilistic, not exact.

4ï¸âƒ£ Concurrency is a DIFFERENT concept
Concurrency is controlled by:
:concurrency: 10


Or CLI:

sidekiq -c 10

Meaning:

At most 10 jobs can run in parallel

Queues and weights do NOT change this.

5ï¸âƒ£ Putting it all together (real scenario)
Config:
sidekiq -c 10 -q critical,5 -q default,2 -q low,1

Reality:

Up to 10 jobs running at once

Most of them will be critical

Some will be default

Very few will be low

NOT â€œ5 critical at onceâ€

6ï¸âƒ£ Timeline example (visual in words)

Assume concurrency = 3
Queues all have jobs

Time 0s:
Thread 1 â†’ critical
Thread 2 â†’ critical
Thread 3 â†’ default

Time 1s:
Thread 1 â†’ critical
Thread 2 â†’ low
Thread 3 â†’ critical


This is statistical fairness, not fixed slots.

7ï¸âƒ£ What happens WITHOUT weights?
sidekiq -q critical -q default -q low


This becomes strict priority:

Always try critical

Only go to default if critical is empty

low may starve forever âŒ

Weights help avoid starvation.

8ï¸âƒ£ Interview-grade explanation (memorize this)

Queue weights in Sidekiq control how often jobs are pulled from each queue, not how many jobs run concurrently.

9ï¸âƒ£ One-line golden rule

Concurrency controls â€œhow manyâ€, weights control â€œfrom whereâ€.