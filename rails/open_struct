OpenStruct is another pure Ruby class (not Rails-specific) that creates flexible data objects â€” even more dynamic than Struct.

Think of it as:
ğŸ‘‰ â€œa hash that behaves like an objectâ€

Basic example
require "ostruct"

user = OpenStruct.new
user.name = "Shubham"
user.role = "Backend Engineer"
user.experience = 6

user.name        # => "Shubham"
user.role        # => "Backend Engineer"


You donâ€™t define attributes upfront â€” you can add anything, anytime.

Initialize with a hash
user = OpenStruct.new(
  name: "Shubham",
  city: "Delhi"
)

How it works internally

OpenStruct stores everything in a hash and uses method_missing to fake attribute methods.

Thatâ€™s why itâ€™s:

âœ… Very flexible
âŒ Slower than Struct

Struct vs OpenStruct (VERY important)

| Feature                    | Struct | OpenStruct |
| -------------------------- | ------ | ---------- |
| Attributes defined upfront | âœ… Yes  | âŒ No       |
| Performance                | âš¡ Fast | ğŸŒ Slower  |
| Memory efficient           | âœ…      | âŒ          |
| Typos caught early         | âœ…      | âŒ          |
| Dynamic fields             | âŒ      | âœ…          |



Example typo bug
user = OpenStruct.new(name: "Shubham")
user.nmae = "Oops"   # silently creates a new field ğŸ˜¬


With Struct, this would raise an error.

Rails usage (where youâ€™ll see it)
1ï¸âƒ£ Parsing API responses
response = OpenStruct.new(JSON.parse(api_response))
response.data.user.name

2ï¸âƒ£ Quick prototypes / scripts
3ï¸âƒ£ Legacy Rails code (older apps use it a lot)
Why modern Rails avoids OpenStruct

Rails core team discourages it because:

Slower

Hides bugs

Harder to refactor

Poor memory usage

Rails prefers:

Struct

POROs (Plain Old Ruby Objects)

Dry::Struct (in big apps)

Better alternative (Rails style)
UserDTO = Struct.new(:name, :email, keyword_init: true)


or plain Ruby class:

class UserDTO
  attr_reader :name, :email

  def initialize(name:, email:)
    @name = name
    @email = email
  end
end

Interview-ready one-liner

â€œOpenStruct allows dynamic attributes at runtime, but itâ€™s slower and error-prone. In Rails, Struct or POROs are preferred for predictable data objects.â€