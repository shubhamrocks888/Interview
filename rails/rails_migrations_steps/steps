âœ… Rails 5 â†’ Rails 6 Migration (Step-by-Step)

Golden rule: Upgrade Ruby first, then Rails, then features

1ï¸âƒ£ Check prerequisites
ğŸ”¹ Ruby version

Rails 6 requires:

Ruby â‰¥ 2.5.0 (Rails 6.1 prefers 2.7+)

ğŸ‘‰ First upgrade Ruby safely.

ruby -v


If needed:

rvm install 2.7.8
rvm use 2.7.8

2ï¸âƒ£ Lock dependencies & get tests green

Before touching Rails:

bundle update --conservative

Fix existing deprecations

Ensure test suite is passing

âš ï¸ Never upgrade Rails with failing tests.

3ï¸âƒ£ Enable deprecation warnings (VERY IMPORTANT)

In config/environments/development.rb:

config.active_support.deprecation = :log


Then run the app and fix Rails 5 deprecations first.

4ï¸âƒ£ Upgrade Rails version (incrementally)

In Gemfile:

gem 'rails', '~> 6.0.0'


Then:

bundle update rails


âš ï¸ Avoid jumping directly to 6.1 initially.

5ï¸âƒ£ Run Rails update task
rails app:update


This will prompt you to update:

config files

initializers

environments

ğŸ‘‰ Review carefully â€” donâ€™t blindly accept all changes.

6ï¸âƒ£ Handle Rails 6 breaking changes
ğŸ”¹ Zeitwerk (major change)

Rails 6 uses Zeitwerk autoloader by default.

Common fixes:

File names must match class names

No circular requires

No constants defined in wrong files

Check:

rails zeitwerk:check


Fix all errors here.

ğŸ”¹ Stronger credentials

Rails 6 encourages:

rails credentials:edit


Replace:

secrets.yml

ENV usage (if applicable)

ğŸ”¹ Action Mailbox / Action Text (optional)

These are new features, not required.
Skip unless you need them.

7ï¸âƒ£ Webpacker (if using frontend)

Rails 6 introduces Webpacker by default.

If upgrading an API-only app â†’ skip
If full-stack app:

rails webpacker:install


Common issues:

Node / Yarn version mismatch

Missing packs

8ï¸âƒ£ Update ActiveRecord behavior changes
ğŸ”¹ belongs_to required by default

(Already in Rails 5, but stricter in 6)

belongs_to :user, optional: true

ğŸ”¹ update_attributes removed

Replace with:

update

ğŸ”¹ render behavior changes

Explicit locals needed more often.

9ï¸âƒ£ Background jobs & async changes

If using:

Sidekiq

DelayedJob

ğŸ‘‰ Update gems to Rails-6-compatible versions.

Example:

gem 'sidekiq', '~> 6.5'

ğŸ”Ÿ Run full test suite + production-like env
RAILS_ENV=production rails assets:precompile


Fix:

eager loading issues

missing constants

caching bugs

1ï¸âƒ£1ï¸âƒ£ Upgrade to Rails 6.1 (optional but recommended)

Once stable on 6.0:

gem 'rails', '~> 6.1'


Repeat:

bundle update rails
rails app:update

ğŸš¨ Common gotchas (interview gold)

| Issue                  | Why                        |
| ---------------------- | -------------------------- |
| Zeitwerk failures      | File/class mismatch        |
| Autoload vs eager load | Production breaks          |
| Webpacker errors       | Node/Yarn mismatch         |
| Monkey patches break   | Load order changed         |
| Thread safety bugs     | Rails 6 is more concurrent |

ğŸ¯ Interview-ready summary

We first upgrade Ruby, fix Rails 5 deprecations, then upgrade Rails incrementally. We run rails app:update, fix Zeitwerk autoloading issues, update dependencies like Sidekiq and Webpacker, run tests in production mode, and only then move to Rails 6.1.