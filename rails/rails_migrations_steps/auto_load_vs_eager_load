1ï¸âƒ£ autoload_paths vs eager_load_paths â€” what they mean
ğŸ”¹ autoload_paths

Rails loads constants on demand

File is loaded only when the constant is first used

Faster boot, but loading happens at runtime

ğŸ”¹ eager_load_paths

Rails loads everything at boot time

All classes/modules are loaded upfront

Slower boot, but safer for concurrency

2ï¸âƒ£ What happens in Production (important)
Default production config
# config/environments/production.rb
config.cache_classes = true
config.eager_load = true

Effect
Feature	Development	Production
autoload	âœ… Yes	âŒ No (mostly ignored)
eager load	âŒ No	âœ… Yes
class reloading	âœ… Yes	âŒ No

ğŸ‘‰ In production, Rails eager-loads code and does not autoload on demand.

3ï¸âƒ£ Why production disables autoloading
âŒ Autoloading problems in prod

Race conditions (multi-threaded servers)

Constants loaded twice

Random NameError under load

âœ… Eager loading advantages

Thread-safe

Predictable behavior

Faster request handling (no loading during request)

4ï¸âƒ£ What paths are actually eager-loaded?

Rails eager-loads:

app/models
app/controllers
app/jobs
app/helpers
app/mailers


Anything in autoload_paths but not in eager_load_paths may not load in prod.

5ï¸âƒ£ Common production bug (very important)
Code works in dev âŒ fails in prod
# lib/my_service.rb
class MyService
end


Development:

Autoloads when referenced â†’ works

Production:

Not eager-loaded â†’ âŒ NameError

6ï¸âƒ£ Correct way to fix this
Option 1ï¸âƒ£ Move code under app/
app/services/my_service.rb


Rails eager-loads this automatically (Rails 6+).

Option 2ï¸âƒ£ Add to eager_load_paths
# config/application.rb
config.eager_load_paths << Rails.root.join('lib')

7ï¸âƒ£ Zeitwerk (Rails 6+)

Rails 6 uses Zeitwerk, which:

Uses eager_load_paths strictly

Enforces file-name â†” constant-name matching

Fails fast in production

Check with:

rails zeitwerk:check

8ï¸âƒ£ autoload_paths â‰  eager_load_paths (key takeaway)
Aspect	autoload_paths	eager_load_paths
Loaded when	On first use	App boot
Thread safe	âŒ No	âœ… Yes
Used in prod	âŒ No	âœ… Yes
Recommended for prod	âŒ	âœ…
ğŸ¯ Interview-ready one-liner

In production, Rails disables autoloading and eager-loads all code at boot to ensure thread safety and predictable behavior. Only paths in eager_load_paths are loaded.

ğŸ§  Memory trick

Dev = lazy loading
Prod = load everything, once